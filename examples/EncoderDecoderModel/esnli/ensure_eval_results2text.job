#!/bin/bash 
# 
#SBATCH --mail-user=zhouy1@cs.uchicago.edu 
#SBATCH --mail-type=FAIL 
#SBATCH --output=/home/zhouy1/slurm_out/%j.%N.stdout 
#SBATCH --error=/home/zhouy1/slurm_out/%j.%N.stderr 
#SBATCH --partition=general 
#SBATCH --job-name=convert_text
#SBATCH --gpus=4 
#SBATCH --nodes=1 
#SBATCH --ntasks=1 
#SBATCH --mem-per-cpu=100000 
#SBATCH --time=4:00:00

seed=0

for partition in `seq 0 4`
do
	for quality in nl pt
	do
		for model in bert esnli
		do
			for test_type in dev ivit ivot ovit ovot
			do
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 1 1
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 2 1
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 4 1
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 8 2
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 16 4
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 32 7
				sh convert_embedding_${model}_text.sh $quality $seed $partition $test_type 64 13
			done
		done
	done
done
